<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Transform your mood in seconds with the Mood-to-Task Matcher! Fun, personalized micro-tasks to boost happiness, reduce stress, and brighten your day.">
    <meta name="keywords" content="mood matcher, stress relief, happiness boost, mood tasks, mental health, quick mood fix">
    <meta name="robots" content="index, follow">
    <title>Mood-to-Task Matcher | 10-Second Mood Boosters for Happier Days</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1511837633001567" crossorigin="anonymous" data-ad-init-load="300"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4985X51W1J"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-4985X51W1J');
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav id="nav">
        <div class="logo">Mood<span>Task</span></div>
        <div class="nav-links">
            <a href="index.html" class="nav-button active">Home</a>
            <a href="blog.html" class="nav-button">Blog</a>
            <a href="tasks-to-impact.html" class="nav-button">Tasks to Impact</a>
            <a href="about.html" class="nav-button">About</a>
        </div>
    </nav>

    <div class="hero-section">
        <h1>Mood-to-Task Matcher</h1>
        <h2>Transform Your Mood in Just 10 Seconds</h2>
        <button class="hero-cta pulse-animation" onclick="showMoodButtons()">Boost My Mood Now</button>
    </div>

    <div id="mood-prompt" class="hidden">
        <p id="instruction">How are you feeling right now?</p>
        <div id="mood-buttons">
            <button class="tired" onclick="matchTask('tired')" aria-label="Select Tired mood" data-tooltip="E.g., Take a 1-minute nap on a fluffy cloud!">
                <span class="mood-icon">üåô</span> Tired üò¥
            </button>
            <button class="stressed" onclick="matchTask('stressed')" aria-label="Select Stressed mood" data-tooltip="E.g., Blow away stress with a giant balloon!">
                <span class="mood-icon">‚ö°</span> Stressed üò£
            </button>
            <button class="bored" onclick="matchTask('bored')" aria-label="Select Bored mood" data-tooltip="E.g., Doodle a silly monster named Sir Bloop!">
                <span class="mood-icon">üåÄ</span> Bored üòê
            </button>
            <button class="excited" onclick="matchTask('excited')" aria-label="Select Excited mood" data-tooltip="E.g., Do a 10-second victory dance!">
                <span class="mood-icon">üéâ</span> Excited üòÑ
            </button>
            <button class="sad" onclick="matchTask('sad')" aria-label="Select Sad mood" data-tooltip="E.g., Hug yourself like a cozy muffin!">
                <span class="mood-icon">‚òî</span> Sad üò¢
            </button>
            <button class="angry" onclick="matchTask('angry')" aria-label="Select Angry mood" data-tooltip="E.g., Stomp like a grumpy dinosaur!">
                <span class="mood-icon">üî•</span> Angry üò°
            </button>
            <button class="happy" onclick="matchTask('happy')" aria-label="Select Happy mood" data-tooltip="E.g., Do a happy wiggle dance!">
                <span class="mood-icon">üåû</span> Happy üòä
            </button>
            <button class="confused" onclick="matchTask('confused')" aria-label="Select Confused mood" data-tooltip="E.g., Flip a coin like a pirate!">
                <span class="mood-icon">‚ùì</span> Confused ü§î
            </button>
        </div>
    </div>
    
    <div id="result"></div>

    <div id="intro-content">
        <div class="feature-cards">
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3>Quick Mood Fixes</h3>
                <p>10-second activities scientifically designed to shift your emotional state</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üß†</div>
                <h3>Mental Wellness</h3>
                <p>Simple practices that build resilience and emotional intelligence</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h3>Track Progress</h3>
                <p>Monitor your mood patterns and see your emotional journey</p>
            </div>
        </div>

        <h3 class="section-heading">How It Works</h3>
        <p>Our tool is simple: select your current mood, and we'll suggest a quick, playful activity to help you feel better. For example, if you're feeling tired, you might get a task like "Close your eyes for 1 minute and imagine you're napping on a fluffy cloud with a unicorn pillow!"</p>
        
        <div class="testimonial">
            <p class="quote">"I use this every morning to set my day off right. Such a simple but effective concept!"</p>
            <p class="author">‚Äî Sarah K.</p>
        </div>
        
        <p class="disclaimer"><em>Health Disclaimer: The tasks provided are for informational and entertainment purposes only and are not intended as medical advice. Always consult a qualified healthcare provider before making changes to your routines, especially if you have pre-existing health conditions or are taking medication.</em></p>
    </div>

    <!-- Online Therapy banner strategically placed after first interaction -->
    <div id="banner" class="premium-offer">
        <div class="ribbon">
            <span>SPECIAL OFFER</span>
        </div>
        <p class="ad-label">Feel Better Faster with Professional Support</p>
        <p class="disclaimer"><em>Affiliate Disclosure: We may earn a commission from purchases at no extra cost to you.</em></p>
        <a href="https://onlinetherapy.go2cloud.org/aff_c?offer_id=2&aff_id=4837&file_id=5" class="banner-link">
            <img src="https://media.go2speed.org/brand/files/onlinetherapy/2/online-therapy-banner_728x90.jpg" alt="Online Therapy Banner" class="banner-img">
        </a>
        <img src="https://onlinetherapy.go2cloud.org/aff_i?offer_id=2&file_id=5&aff_id=4837" width="0" height="0" style="position:absolute;visibility:hidden;" border="0" />
        <div class="ad-info">
            <h4>Why 10,000+ People Choose Online Therapy:</h4>
            <div class="benefits-grid">
                <div class="benefit-item">
                    <span class="benefit-icon">üéØ</span>
                    <span>Weekly video sessions</span>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">üí¨</span>
                    <span>Unlimited messaging</span>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">üì±</span>
                    <span>Access anywhere</span>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">üõ†Ô∏è</span>
                    <span>25+ practical worksheets</span>
                </div>
            </div>
            <div class="promo-code">
                <p>Use code: <strong>THERAPY20</strong> for 20% OFF</p>
            </div>
            <button class="cta-button" onclick="window.open('https://onlinetherapy.go2cloud.org/aff_c?offer_id=2&aff_id=4837&file_id=5', '_blank')">Get Started Now</button>
        </div>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'daily-tab')">Daily Check-In</button>
            <button class="tab-button" onclick="openTab(event, 'history-tab')">Your History</button>
            <button class="tab-button" onclick="openTab(event, 'favorites-tab')">Your Favorites</button>
        </div>
        
        <div id="daily-tab" class="tab-content active">
            <div id="daily-checkin-section">
                <h3>Daily Mood Check-In</h3>
                <p>Track your mood regularly for personalized recommendations!</p>
                <button class="checkin-button" onclick="showMoodButtons()">Check In Now</button>
                <div id="recommendation"></div>
            </div>
        </div>
        
        <div id="history-tab" class="tab-content">
            <div id="history-section">
                <h3>Your Mood History</h3>
                <div id="history-visualization" class="history-viz"></div>
                <ul id="history-list"></ul>
                <button class="clear-history-button" onclick="clearHistory()">Clear History</button>
            </div>
        </div>
        
        <div id="favorites-tab" class="tab-content">
            <div id="favorites-section">
                <h3>Your Favorite Tasks</h3>
                <ul id="favorites-list"></ul>
            </div>
        </div>
    </div>

    <div class="cta-section">
        <h3>Ready to feel better every day?</h3>
        <p>Join thousands of people improving their mood in seconds</p>
        <button class="cta-button pulse-animation" onclick="showMoodButtons()">Try It Now</button>
        
        <div class="social-proof">
            <div class="stat">
                <span class="stat-number">10,000+</span>
                <span class="stat-label">Daily Users</span>
            </div>
            <div class="stat">
                <span class="stat-number">4.8‚≠ê</span>
                <span class="stat-label">User Rating</span>
            </div>
            <div class="stat">
                <span class="stat-number">85%</span>
                <span class="stat-label">Mood Improvement</span>
            </div>
        </div>
    </div>

    <div id="share">
        <svg class="share-logo" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0V3h-.5a.5.5 0 0 1-.5-.5zm-1.5 8a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-7-6a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm10.586 9.293-5-5a1 1 0 0 1 0-1.414l5-5a1 1 0 0 1 1.414 1.414L10.414 8l4.293 4.293a1 1 0 0 1-1.414 1.414zM5.5 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0V6h-.5a.5.5 0 0 1-.5-.5z"/>
        </svg>
        <span>Share on X</span>
    </div>

    <!-- Support Us section moved closer to main content -->
    <div id="donate">
        <h3>Support Us</h3>
        <p>If you find this tool helpful, please consider supporting us!</p>
        <a href="https://www.buymeacoffee.com/moodtask" target="_blank" rel="noopener noreferrer">
            <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me a Coffee" style="width: 150px; height: auto;">
        </a>
    </div>

    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <h4>Mood-to-Task Matcher</h4>
                <p>Transform your mood in seconds with fun, quick activities tailored to how you feel.</p>
            </div>
            <div class="footer-column">
                <h4>Quick Links</h4>
                <a href="index.html" class="footer-link">Home</a>
                <a href="blog.html" class="footer-link">Blog</a>
                <a href="tasks-to-impact.html" class="footer-link">Tasks to Impact</a>
                <a href="about.html" class="footer-link">About</a>
            </div>
            <div class="footer-column">
                <h4>Legal</h4>
                <a href="privacy.html" class="footer-link">Privacy Policy</a>
                <a href="terms.html" class="footer-link">Terms of Use</a>
            </div>
        </div>
        <p class="disclaimer"><em>General Disclaimer: Mood-to-Task Matcher provides this website for informational purposes only. We are not responsible for any errors, omissions, or outcomes resulting from the use of this information. Users follow external links, including those to third-party sites, at their own risk. Always review the terms and privacy policies of external websites.</em></p>
        <p class="copyright">¬© 2025 Mood-to-Task Matcher. All rights reserved.</p>
    </footer>

    <script>
        const tasks={
            tired:[
                "Close your eyes for 1 minute and imagine you're napping on a fluffy cloud with a unicorn pillow!",
                "Sip a glass of cold water and pretend you're a sleepy robot recharging with magic juice!",
                "Do a silly stretch: reach for the sky like you're picking stars for a sleepy galaxy!",
                "Hum a lullaby for 30 seconds to trick your brain into a mini-rest mode!",
                "Look at something green for 30 seconds and imagine you're a tired frog on a lily pad!",
                "Take 5 slow breaths and picture a hamster wheel slowing down in your brain!",
                "Wiggle your toes 10 times to wake up your sleepy feet like they're dancing ants!",
                "Set a timer for a 2-minute rest and pretend you're a bear hibernating in a cozy cave!",
                "Sniff something refreshing (like a lemon) and imagine you're a sleepy pirate finding treasure!",
                "Blink 10 times fast to reboot your tired eyes like a blinking disco light!"
            ],
            stressed:[
                "Take 5 deep breaths and pretend you're blowing up a giant balloon for a silly party!",
                "Squeeze your hands into fists, then release them like you're letting go of a grumpy stress monster!",
                "Count 5 things you can see and imagine they're all part of a wacky stress-free circus!",
                "Hum a silly tune for 30 seconds to distract your brain from stress gremlins!",
                "Tense your shoulders, then drop them like you're a puppet cutting its strings in a goofy play!",
                "Say 'I'm a calm potato!' out loud to remind your brain to chill like a veggie!",
                "Look out a window for 1 minute and imagine your stress floating away on a fluffy cloud!",
                "Shake your arms like a wiggly jellyfish for 10 seconds to shake off the stress vibes!",
                "Sip warm water and pretend it's a magic potion to melt away your worries!",
                "Close your eyes and picture a giggling puppy to chase away your stress with cuddles!"
            ],
            bored:[
                "Doodle a silly monster for 1 minute and give it a funny name like 'Sir Bloop'!",
                "Make a paper airplane and pretend it's flying to a magical land of un-boredom!",
                "Invent a 3-word story about a bored banana who becomes a superhero!",
                "Spin around 3 times and laugh like a goofy villain to spark some fun energy!",
                "Find 3 random objects and pretend they're treasures in a pirate's bored-busting chest!",
                "Sing a jingle from a commercial in a funny voice to entertain your bored brain!",
                "Draw a stick figure doing a silly dance to join your boredom-banishing party!",
                "Pretend you're a robot for 30 seconds and beep-boop your way out of boredom!",
                "Rearrange 3 things nearby and imagine you're decorating a castle for a bored king!",
                "Write down a wacky idea, like 'What if clouds were cotton candy?' to spark creativity!"
            ],
            excited:[
                "Do a 10-second victory dance like you're a disco ball at an excitement party!",
                "Write down one wild idea and imagine it coming true with a parade of happy squirrels!",
                "Jump up and down 5 times and shout 'I'm a rocket of excitement!' to launch your energy!",
                "High-five yourself in a mirror and say 'You're an excitement superstar!'",
                "Snap your fingers 10 times fast to create a beat for your excited heart!",
                "Draw a big star and color it in with all your sparkly, excited vibes!",
                "Shout 'Yes!' as loud as you dare, like you're cheering for a team of excited kittens!",
                "Plan one tiny step for your idea and pretend you're a wizard making magic happen!",
                "Imagine your excitement as a bouncy ball zooming around a happy room for 10 seconds!",
                "Tell someone (or yourself) why you're excited, like you're announcing it on a game show!"
            ],
            sad:[
                "Hug yourself tight for 10 seconds and whisper 'You're a sad little muffin, but I love you!'",
                "Write down one thing you're grateful for, like 'I have a cozy sock!' and smile at it!",
                "Look at a photo that makes you smile and imagine giving it a big, silly hug!",
                "Wrap up in a blanket for 1 minute and pretend you're a sad burrito getting cozy!",
                "Sip something warm and imagine it's a potion of tiny hugs for your sad heart!",
                "Draw a tiny heart and say 'This is for you, sad me!' to cheer yourself up!",
                "Listen to your favorite song for 1 minute and pretend it's a lullaby for your sadness!",
                "Take 5 slow breaths and picture a friendly cloud saying 'It's okay to be sad!'",
                "Say 'This will pass!' softly, like you're a wise old turtle comforting a sad fish!",
                "Watch a cute animal video and imagine you're best friends with that fluffy critter!"
            ],
            angry:[
                "Stomp your feet 5 times like a grumpy dinosaur to let out your angry roars!",
                "Take 5 quick breaths and imagine blowing out your anger like a fiery dragon!",
                "Squeeze a pillow 5 times and pretend it's a squishy anger monster you're taming!",
                "Count 5 things you can touch and imagine they're calming your anger like magic pebbles!",
                "Shake your whole body for 10 seconds like a wiggly dog shaking off angry water!",
                "Growl like a bear for 5 seconds, then laugh to turn your anger into silliness!",
                "Scribble hard on paper, then toss it like you're throwing away your angry scribbles!",
                "Say 'I'm cooling down!' out loud, like you're an angry volcano turning into a chill hill!",
                "Tap your fingers 10 times fast and imagine your anger turning into tiny drumbeats!",
                "Close your eyes and picture a silly clown juggling your anger away for 10 seconds!"
            ],
            happy:[
                "Do a little happy wiggle dance for 10 seconds like you're a joyful jellybean!",
                "Write down why you're happy and pretend you're sending it to a happiness fairy!",
                "Share a quick smile with someone (or yourself in a mirror) like you're a sunshine star!",
                "Hum a cheerful tune for 30 seconds and imagine you're a happy bird singing!",
                "Say 'Life's good!' out loud, like you're announcing it to a crowd of happy puppies!",
                "Draw a quick smiley face and give it a high-five to celebrate your happiness!",
                "Look around and name 3 pretty things, like you're a happiness detective on a mission!",
                "Stretch your arms up high and pretend you're reaching for a giant happiness balloon!",
                "Snap your fingers to a happy beat for 10 seconds, like you're in a joy parade!",
                "Give yourself a pat on the back and say 'You're a happiness hero!' with a big grin!"
            ],
            confused:[
                "Flip a coin to decide something small and pretend you're a confused pirate picking treasure!",
                "Take 3 slow breaths and imagine your confusion turning into a clear, sparkly bubble!",
                "Write your question on paper and draw a silly smiley face to cheer up your confused brain!",
                "Count to 5 and pick the first idea that pops into your head, like a magical lightbulb moment!",
                "Tap your forehead 5 times and say 'Clarity, come to me!' like a confused wizard!",
                "Shake your head gently and imagine your confusion falling off like glittery confetti!",
                "Look up and say 'I'll figure it out!' like you're a detective solving a wacky mystery!",
                "Draw a question mark, then turn it into a silly doodle to laugh at your confusion!",
                "Ask someone (or yourself) a random question, like 'What would a confused cat do?'",
                "Close your eyes and pick a direction to point, like you're a confused compass finding north!"
            ]
        },messages=[
            "Perfect match! This quick task will help you feel better:",
            "Here's your personalized mood-booster:",
            "Try this fun activity to shift your mood:",
            "This is exactly what you need right now:",
            "Your custom mood-lifter is ready:",
            "Here's a perfect 10-second task for you:",
            "Let's transform that feeling with this activity:",
            "Your mood prescription is ready:"
        ],moodColors={tired:"#E6F0FA",stressed:"#FFE6E6",bored:"#E6F5FA",excited:"#FFF9E6",sad:"#E6ECFA",angry:"#FFE6E6",happy:"#E6FAE6",confused:"#F5E6FA"},goodFeelingColors=["#E6FAE6","#FFF9E6","#E6F5FA","#FFE6E6","#F5E6FA"];
        
        let currentMood = null, currentTask = null;

        function calculateLuminance(color) {
            const hex = color.replace("#", ""),
                  r = parse SyparseInt(hex.substring(0, 2), 16),
                  g = parseInt(hex.substring(2, 4), 16),
                  b = parseInt(hex.substring(4, 6), 16);
            return 0.299 * r + 0.587 * g + 0.114 * b;
        }

        function playClickSound() {
            const audio = new Audio('click.mp3');
            audio.play();
        }

        function showMoodButtons() {
            document.getElementById("mood-prompt").classList.remove("hidden");
            document.getElementById("mood-prompt").scrollIntoView({behavior: "smooth"});
            
            // Add animation to mood buttons
            const buttons = document.querySelectorAll("#mood-buttons button");
            buttons.forEach((btn, index) => {
                setTimeout(() => {
                    btn.classList.add("fade-in");
                }, index * 50);
            });
        }

        function matchTask(mood, excludeTask = null) {
            playClickSound(); // Play sound on click (requires click.mp3 file in project directory)
            currentMood = mood;
            const resultDiv = document.getElementById("result"),
                  shareLink = document.getElementById("share"),
                  buttons = document.querySelectorAll("#mood-buttons button"),
                  currentButton = document.querySelector(`#mood-buttons button[onclick="matchTask('${mood}')"]`);

            if (!mood) {
                resultDiv.innerHTML = "Please select a mood first!";
                resultDiv.classList.remove("show");
                shareLink.href = "";
                return;
            }

            buttons.forEach(btn => btn.classList.remove("selected"));
            currentButton.classList.add("selected");

            const taskList = tasks[mood];
            let task;
            do {
                task = taskList[Math.floor(Math.random() * taskList.length)];
            } while (task === excludeTask && taskList.length > 1);

            currentTask = task;
            const message = messages[Math.floor(Math.random() * messages.length)],
                  selectedColor = goodFeelingColors[Math.floor(Math.random() * goodFeelingColors.length)];

            resultDiv.innerHTML = `
                <div class="task-card">
                    <div class="task-header">
                        <span class="mood-emoji">${getEmojiForMood(mood)}</span>
                        <h3>${message}</h3>
                    </div>
                    <div class="task-body">
                        <p class="task-text">${task}</p>
                    </div>
                    <div class="task-footer">
                        <button class="favorite-button" onclick="saveToFavorites('${mood}', '${task}')">
                            <span class="heart-icon">‚ù§Ô∏è</span> Save to Favorites
                        </button>
                        <button class="new-task-button" onclick="matchTask('${mood}', '${task}')">
                            Try Another
                        </button>
                    </div>
                </div>
            `;
            
            resultDiv.classList.add("show");
            resultDiv.scrollIntoView({behavior: "smooth"});
            
            shareLink.href = `https://x.com/intent/post?text=I just got this mood fix from Mood-to-Task Matcher: ${encodeURIComponent(message + " " + task)} - https://www.moodtask.org/`;
            resultDiv.style.backgroundColor = selectedColor;

            const luminance = calculateLuminance(selectedColor);
            resultDiv.style.color = luminance > 128 ? "#333333" : "#666666";

            // Show banner after task is displayed
            document.getElementById("banner").classList.add("show-banner");

            saveMoodHistory(mood);
            provideRecommendation();
            updateHistoryVisualization();
        }

        function getEmojiForMood(mood) {
            const emojis = {
                tired: "üò¥",
                stressed: "üò£",
                bored: "üòê",
                excited: "üòÑ",
                sad: "üò¢",
                angry: "üò°",
                happy: "üòä",
                confused: "ü§î"
            };
            return emojis[mood] || "üòä";
        }

        function saveMoodHistory(mood) {
            const history = JSON.parse(localStorage.getItem("moodHistory") || "[]"),
                  date = new Date().toLocaleDateString("en-US", { year: "numeric", month: "short", day: "numeric" });
            history.push({ mood, date, timestamp: new Date().getTime() });
            localStorage.setItem("moodHistory", JSON.stringify(history));
            displayMoodHistory();
        }

        function displayMoodHistory() {
            const history = JSON.parse(localStorage.getItem("moodHistory") || "[]"),
                  historyList = document.getElementById("history-list");
            historyList.innerHTML = "";
            
            // Show most recent entries first
            const recentHistory = [...history].reverse().slice(0, 10);
            
            if (recentHistory.length > 0) {
                recentHistory.forEach(entry => {
                    const li = document.createElement("li");
                    li.className = "history-item";
                    li.innerHTML = `<span class="history-emoji">${getEmojiForMood(entry.mood)}</span> <span class="history-mood">${entry.mood}</span> <span class="history-date">${entry.date}</span>`;
                    historyList.appendChild(li);
                });
            } else {
                historyList.innerHTML = "<li class='empty-list'>No mood history yet!</li>";
            }
        }

        function updateHistoryVisualization() {
            const history = JSON.parse(localStorage.getItem("moodHistory") || "[]");
            const vizContainer = document.getElementById("history-visualization");
            vizContainer.innerHTML = "";
            
            if (history.length < 3) {
                vizContainer.innerHTML = "<p>Check in more to see your mood trends!</p>";
                return;
            }
            
            // Create simple mood dots
            const recentHistory = [...history].reverse().slice(0, 7);
            const moodViz = document.createElement("div");
            moodViz.className = "mood-viz";
            
            recentHistory.forEach(entry => {
                const dot = document.createElement("div");
                dot.className = "mood-dot";
                dot.style.backgroundColor = moodColors[entry.mood];
                dot.title = `${entry.mood} on ${entry.date}`;
                
                // Add emoji to dot
                const emoji = document.createElement("span");
                emoji.className = "dot-emoji";
                emoji.textContent = getEmojiForMood(entry.mood);
                dot.appendChild(emoji);
                
                moodViz.appendChild(dot);
            });
            
            vizContainer.appendChild(moodViz);
            
            // Add trend info
            const trendInfo = document.createElement("p");
            trendInfo.className = "trend-info";
            
            const happyCount = history.filter(entry => entry.mood === "happy" || entry.mood === "excited").length;
            const sadCount = history.filter(entry => entry.mood === "sad" || entry.mood === "stressed" || entry.mood === "angry").length;
            
            if (happyCount > sadCount) {
                trendInfo.innerHTML = "You've been <span class='positive'>mostly positive</span> lately!";
            } else if (sadCount > happyCount) {
                trendInfo.innerHTML = "You've been feeling <span class='negative'>challenged</span> lately. Try some happy tasks!";
            } else {
                trendInfo.innerHTML = "Your moods are <span class='neutral'>balanced</span>. Keep exploring!";
            }
            
            vizContainer.appendChild(trendInfo);
        }

        function saveToFavorites(mood, task) {
            const favorites = JSON.parse(localStorage.getItem("favorites") || "[]");
            if (!favorites.some(fav => fav.mood === mood && fav.task === task)) {
                favorites.push({ mood, task });
                localStorage.setItem("favorites", JSON.stringify(favorites));
            }
            displayFavorites();
        }

        function displayFavorites() {
            const favorites = JSON.parse(localStorage.getItem("favorites") || "[]"),
                  favoritesList = document.getElementById("favorites-list");
            favoritesList.innerHTML = "";
            
            if (favorites.length > 0) {
                favorites.forEach(entry => {
                    const li = document.createElement("li");
                    li.className = "favorite-item";
                    li.innerHTML = `
                        <span class="favorite-emoji">${getEmojiForMood(entry.mood)}</span>
                        <span class="favorite-mood">${entry.mood}:</span>
                        <span class="favorite-task">${entry.task}</span>
                    `;
                    favoritesList.appendChild(li);
                });
            } else {
                favoritesList.innerHTML = "<li class='empty-list'>No favorite tasks yet!</li>";
            }
        }

        function clearHistory() {
            localStorage.removeItem("moodHistory");
            localStorage.removeItem("favorites");
            displayMoodHistory();
            displayFavorites();
            updateHistoryVisualization();
            provideRecommendation();
        }

        function provideRecommendation() {
            const history = JSON.parse(localStorage.getItem("moodHistory") || "[]"),
                  recommendationDiv = document.getElementById("recommendation");
            if (history.length < 3) {
                recommendationDiv.innerHTML = "Keep checking in to get personalized recommendations!";
                return;
            }

            const recentMoods = history.slice(-3).map(entry => entry.mood),
                  stressCount = recentMoods.filter(mood => mood === "stressed").length,
                  sadCount = recentMoods.filter(mood => mood === "sad").length,
                  happyCount = recentMoods.filter(mood => mood === "happy").length;

            let recommendation = "";
            if (stressCount >= 2) {
                recommendation = "You've been stressed lately‚Äîtry this relaxation task: Take 5 deep breaths and imagine your stress floating away on a fluffy cloud! Also, check out our <a href='blog-post-2.html'>blog post on stress relief</a>.";
            } else if (sadCount >= 2) {
                recommendation = "You've been feeling sad lately‚Äîhere's a comforting task: Hug yourself tight for 10 seconds and whisper 'You're a sad little muffin, but I love you!'";
            } else if (happyCount >= 2) {
                recommendation = "You've been happy lately‚Äîkeep the good vibes going! Try this: Do a little happy wiggle dance for 10 seconds like you're a joyful jellybean!";
            } else {
                recommendation = "Your recent moods are mixed. Try a variety of tasks to find what feels best!";
            }
            recommendationDiv.innerHTML = recommendation;
        }

        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }

            const tabButtons = document.getElementsByClassName("tab-button");
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("active");
            }

            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");

            // Scroll to the tab content
            document.getElementById(tabName).scrollIntoView({behavior: "smooth"});
        }

        window.onload = () => {
            displayMoodHistory();
            displayFavorites();
            updateHistoryVisualization();
            provideRecommendation();
        };

        // Add scroll effect for nav
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('nav');
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Share on X functionality
        document.getElementById('share').addEventListener('click', () => {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('Check out Mood-to-Task Matcher! Match your mood to fun, quick tasks to improve your day. #MoodToTask');
            window.open(`https://x.com/intent/tweet?url=${url}&text=${text}`, '_blank');
        });
    </script>
</body>
</html>
